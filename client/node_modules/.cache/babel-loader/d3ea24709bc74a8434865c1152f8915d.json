{"ast":null,"code":"import _regeneratorRuntime from\"/home/neosoft/React_training/React_practice/clothing-ecommerce/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/neosoft/React_training/React_practice/clothing-ecommerce/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/neosoft/React_training/React_practice/clothing-ecommerce/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/neosoft/React_training/React_practice/clothing-ecommerce/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/neosoft/React_training/React_practice/clothing-ecommerce/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/neosoft/React_training/React_practice/clothing-ecommerce/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/neosoft/React_training/React_practice/clothing-ecommerce/node_modules/@babel/runtime/helpers/esm/createSuper\";import{Route,Switch,Redirect}from'react-router-dom';import{getAuth,onAuthStateChanged}from\"firebase/auth\";import'./App.css';import Header from'./Components/Header/Header';import Homepage from'./pages/HomePage';import Shop from'./pages/Shop/Shop';import SignInAndSignUp from'./pages/Sign-in-and-Sign-up/Sign-in-and-Sign-up';import{auth,createUserProfileDocument}from'./FireBase/Firebase-util';import{Component}from'react';import{connect}from'react-redux';import{setCurrentUser as _setCurrentUser}from'./redux/User/UserAction';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.unsubscribeFromAuth=null;return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var setCurrentUser=this.props.setCurrentUser;console.log(\"testing app\",setCurrentUser);this.unsubscribeFromAuth=onAuthStateChanged(auth,/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(user){var userRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!user){_context.next=5;break;}_context.next=3;return createUserProfileDocument(user);case 3:userRef=_context.sent;userRef.onSnapshot(function(snapShots){setCurrentUser(_objectSpread({id:snapShots.id},snapShots.data()));});case 5:setCurrentUser(user);case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.unsubscribeFromAuth();}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",component:Homepage}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/Shop\",component:Shop}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/Signin\",render:function render(){return _this2.props.currentUser?/*#__PURE__*/_jsx(Redirect,{to:\"/\"}):/*#__PURE__*/_jsx(SignInAndSignUp,{});}})]})]})//     <div>\n// component={SignInAndSignUp\n// <Homepage></Homepage>\n//     </div>\n;}}]);return App;}(Component);var mapStateToProps=function mapStateToProps(_ref2){var user=_ref2.user;return{currentUser:user.currentUser};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{setCurrentUser:function setCurrentUser(user){return dispatch(_setCurrentUser(user));}};};export default connect(mapStateToProps,mapDispatchToProps)(App);","map":{"version":3,"sources":["/home/neosoft/React_training/React_practice/clothing-ecommerce/src/App.js"],"names":["Route","Switch","Redirect","getAuth","onAuthStateChanged","Header","Homepage","Shop","SignInAndSignUp","auth","createUserProfileDocument","Component","connect","setCurrentUser","App","unsubscribeFromAuth","props","console","log","user","userRef","onSnapshot","snapShots","id","data","currentUser","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"m+BACA,OAASA,KAAT,CAAgBC,MAAhB,CAAyBC,QAAzB,KAAwC,kBAAxC,CACA,OAASC,OAAT,CAAkBC,kBAAlB,KAA4C,eAA5C,CACA,MAAO,WAAP,CACA,MAAOC,CAAAA,MAAP,KAAmB,4BAAnB,CACA,MAAOC,CAAAA,QAAP,KAAqB,kBAArB,CACA,MAAOC,CAAAA,IAAP,KAAiB,mBAAjB,CACA,MAAOC,CAAAA,eAAP,KAA4B,iDAA5B,CACA,OAASC,IAAT,CAAeC,yBAAf,KAAgD,0BAAhD,CACA,OAASC,SAAT,KAA0B,OAA1B,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAAQC,cAAc,GAAdA,CAAAA,eAAR,KAA6B,yBAA7B,C,2FAGOC,CAAAA,G,+SAGLC,mB,CAAsB,I,gEAEtB,4BAAmB,CAEjB,GAAOF,CAAAA,cAAP,CAAyB,KAAKG,KAA9B,CAAOH,cAAP,CAEAI,OAAO,CAACC,GAAR,CAAY,aAAZ,CAA0BL,cAA1B,EAED,KAAKE,mBAAL,CAA4BX,kBAAkB,CAACK,IAAD,0FAAO,iBAAMU,IAAN,kIAE7CA,IAF6C,+CAIvBT,CAAAA,yBAAyB,CAACS,IAAD,CAJF,QAIxCC,OAJwC,eAK9CA,OAAO,CAACC,UAAR,CAAmB,SAAAC,SAAS,CAAI,CAC5BT,cAAc,gBACZU,EAAE,CAAED,SAAS,CAACC,EADF,EAETD,SAAS,CAACE,IAAV,EAFS,EAAd,CAIH,CALD,EAL8C,OAalDX,cAAc,CAACM,IAAD,CAAd,CAbkD,sDAAP,+DAA9C,CAeA,C,oCAED,+BAAsB,CAEpB,KAAKJ,mBAAL,GACD,C,sBAED,iBAAQ,iBACN,mBACE,oCACA,KAAC,MAAD,IADA,cAEA,MAAC,MAAD,yBACA,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,GAAlB,CAAsB,SAAS,CAAET,QAAjC,EADA,cAEE,KAAC,KAAD,EAAQ,KAAK,KAAb,CAAc,IAAI,CAAC,OAAnB,CAA2B,SAAS,CAAEC,IAAtC,EAFF,cAGE,KAAC,KAAD,EAAQ,KAAK,KAAb,CAAc,IAAI,CAAC,SAAnB,CAA6B,MAAM,CAAE,wBAAM,CAAA,MAAI,CAACS,KAAL,CAAWS,WAAX,cAAyB,KAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAzB,cAA8C,KAAC,eAAD,IAApD,EAArC,EAHF,GAFA,GASJ;AACA;AACA;AACA;AAbE,CAgBD,C,iBAlDgBd,S,EAsDnB,GAAMe,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,WAAEP,CAAAA,IAAF,OAAEA,IAAF,OAAY,CAClCM,WAAW,CAAEN,IAAI,CAACM,WADgB,CAAZ,EAAxB,CAIA,GAAME,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAC,QAAQ,QAAK,CACtCf,cAAc,CAAE,wBAAAM,IAAI,QAAIS,CAAAA,QAAQ,CAACf,eAAc,CAACM,IAAD,CAAf,CAAZ,EADkB,CAAL,EAAnC,CAIA,cAAeP,CAAAA,OAAO,CACpBc,eADoB,CAEpBC,kBAFoB,CAAP,CAGbb,GAHa,CAAf","sourcesContent":["\nimport { Route, Switch , Redirect} from 'react-router-dom';\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\"\nimport './App.css';\nimport Header from './Components/Header/Header';\nimport Homepage from './pages/HomePage';\nimport Shop from './pages/Shop/Shop';\nimport SignInAndSignUp from './pages/Sign-in-and-Sign-up/Sign-in-and-Sign-up';\nimport { auth, createUserProfileDocument } from './FireBase/Firebase-util';\nimport { Component } from 'react';\nimport { connect } from 'react-redux';\nimport {setCurrentUser} from './redux/User/UserAction'\n\n\nclass  App extends Component {\n\n\n  unsubscribeFromAuth = null;\n\n  componentDidMount(){\n\n    const {setCurrentUser} = this.props\n\n    console.log(\"testing app\",setCurrentUser)\n\n   this.unsubscribeFromAuth =  onAuthStateChanged(auth, async user=>\n      {\n        if(user){\n\n          const userRef = await  createUserProfileDocument(user);\n          userRef.onSnapshot(snapShots => {\n              setCurrentUser ({\n                id: snapShots.id,\n                ...snapShots.data()\n              });\n          });\n        }\n   \n      setCurrentUser(user)\n      });\n  }\n\n  componentWillUnmount(){\n\n    this.unsubscribeFromAuth();\n  }\n\n  render(){\n    return (\n      <div>\n      <Header/>\n      <Switch>\n      <Route exact path=\"/\" component={Homepage}/>\n        <Route  exact path=\"/Shop\" component={Shop}/>\n        <Route  exact path=\"/Signin\" render={() => this.props.currentUser ? <Redirect to=\"/\"/> : <SignInAndSignUp/>}/>\n      </Switch>\n      \n      </div>\n  //     <div>\n  // component={SignInAndSignUp\n  // <Homepage></Homepage>\n  //     </div>\n    );\n\n  }\n \n}\n\nconst mapStateToProps = ({user}) =>({\n  currentUser: user.currentUser\n})\n\nconst mapDispatchToProps = dispatch => ({\n  setCurrentUser: user => dispatch(setCurrentUser(user))\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(App);\n"]},"metadata":{},"sourceType":"module"}