{"ast":null,"code":"import { takeLatest, put, all, call } from \"@redux-saga/core/effects\";\nimport UserActionTypes from \"./UserTypes\";\nimport { signInWithPopup, signOut } from \"firebase/auth\";\nimport { signInWithEmailAndPassword, createUserWithEmailAndPassword } from \"firebase/auth\";\nimport { GoogleProvider, auth, createUserProfileDocument, getCurrentUser } from \"../../FireBase/Firebase-util\";\nimport { SignInFailure, SignInSuccess, SignOutFailure, SignOutSuccess, SignUpFailure, SignUpSuccess } from \"./UserAction\";\nexport function* getSnapShotForUser(userAuth, additionalData) {\n  try {\n    const userRef = yield call(createUserProfileDocument, userAuth, additionalData);\n    const userSnapshot = yield userRef.get();\n    yield put(SignInSuccess({\n      id: userSnapshot.id,\n      ...userSnapshot.data()\n    }));\n  } catch (error) {\n    yield put(SignInFailure(error));\n  }\n}\nexport function* SignInWithGoogle() {\n  try {\n    const {\n      user\n    } = yield signInWithPopup(auth, GoogleProvider);\n    yield getSnapShotForUser(user);\n  } catch (error) {\n    yield put(SignInFailure(error));\n  }\n}\n_c = SignInWithGoogle;\nexport function* SignInWithEmail({\n  payload: {\n    email,\n    password\n  }\n}) {\n  try {\n    const {\n      user\n    } = yield signInWithEmailAndPassword(auth, email, password);\n    yield getSnapShotForUser(user);\n  } catch (error) {\n    yield put(SignInFailure(error));\n  }\n}\n_c2 = SignInWithEmail;\nexport function* isUserAuthenticated() {\n  try {\n    const userAuth = yield getCurrentUser();\n    if (!userAuth) return;\n    yield getSnapShotForUser(userAuth);\n  } catch (error) {}\n}\nexport function* SignOut() {\n  try {\n    yield signOut(auth);\n    yield put(SignOutSuccess());\n  } catch (error) {\n    yield put(SignOutFailure(error));\n  }\n}\n_c3 = SignOut;\nexport function* SignUp({\n  payload: {\n    email,\n    password,\n    displayName\n  }\n}) {\n  try {\n    const {\n      user\n    } = yield createUserWithEmailAndPassword(auth, email, password);\n    yield put(SignUpSuccess({\n      user,\n      additionalData: {\n        displayName\n      }\n    }));\n  } catch (error) {\n    yield put(SignUpFailure(error));\n  }\n}\n_c4 = SignUp;\nexport function* SignInAfterSignUp({\n  payload: {\n    user,\n    additionalData\n  }\n}) {\n  yield getSnapShotForUser(user, additionalData);\n}\n_c5 = SignInAfterSignUp;\nexport function* onGoogleSignInStart() {\n  yield takeLatest(UserActionTypes.GOOGLE_SIGN_IN_START, SignInWithGoogle);\n}\nexport function* onEmailSignInstart() {\n  yield takeLatest(UserActionTypes.EMAIL_SIGN_IN_START, SignInWithEmail);\n}\nexport function* onCheckUserSession() {\n  yield takeLatest(UserActionTypes.CHECK_USER_SESSION, isUserAuthenticated);\n}\nexport function* onSignOutStart() {\n  yield takeLatest(UserActionTypes.SIGN_OUT_START, SignOut);\n}\nexport function* onSignUpStart() {\n  yield takeLatest(UserActionTypes.SIGN_UP_START, SignUp);\n}\nexport function* onSignUpSuccess() {\n  yield takeLatest(UserActionTypes.SIGN_OUT_SUCCESS, SignInAfterSignUp);\n}\nexport function* UserSagas() {\n  yield all([call(onGoogleSignInStart), call(onEmailSignInstart), call(onCheckUserSession), call(onSignOutStart), call(onSignUpStart), call(onSignUpSuccess)]);\n}\n_c6 = UserSagas;\n\nvar _c, _c2, _c3, _c4, _c5, _c6;\n\n$RefreshReg$(_c, \"SignInWithGoogle\");\n$RefreshReg$(_c2, \"SignInWithEmail\");\n$RefreshReg$(_c3, \"SignOut\");\n$RefreshReg$(_c4, \"SignUp\");\n$RefreshReg$(_c5, \"SignInAfterSignUp\");\n$RefreshReg$(_c6, \"UserSagas\");","map":{"version":3,"sources":["/home/neosoft/React_training/React_practice/clothing-ecommerce/src/redux/User/UserSagas.js"],"names":["takeLatest","put","all","call","UserActionTypes","signInWithPopup","signOut","signInWithEmailAndPassword","createUserWithEmailAndPassword","GoogleProvider","auth","createUserProfileDocument","getCurrentUser","SignInFailure","SignInSuccess","SignOutFailure","SignOutSuccess","SignUpFailure","SignUpSuccess","getSnapShotForUser","userAuth","additionalData","userRef","userSnapshot","get","id","data","error","SignInWithGoogle","user","SignInWithEmail","payload","email","password","isUserAuthenticated","SignOut","SignUp","displayName","SignInAfterSignUp","onGoogleSignInStart","GOOGLE_SIGN_IN_START","onEmailSignInstart","EMAIL_SIGN_IN_START","onCheckUserSession","CHECK_USER_SESSION","onSignOutStart","SIGN_OUT_START","onSignUpStart","SIGN_UP_START","onSignUpSuccess","SIGN_OUT_SUCCESS","UserSagas"],"mappings":"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","sourcesContent":["import { takeLatest, put, all, call} from \"@redux-saga/core/effects\";\nimport UserActionTypes from \"./UserTypes\";\nimport {signInWithPopup, signOut } from \"firebase/auth\";\nimport {signInWithEmailAndPassword , createUserWithEmailAndPassword} from \"firebase/auth\"\n\nimport { GoogleProvider, auth, createUserProfileDocument,getCurrentUser } from \"../../FireBase/Firebase-util\";\nimport { SignInFailure, SignInSuccess, SignOutFailure, SignOutSuccess, SignUpFailure, SignUpSuccess } from \"./UserAction\";\n\nexport function* getSnapShotForUser(userAuth, additionalData){\n    try{\n        const userRef = yield call(createUserProfileDocument, userAuth, additionalData);\n        const userSnapshot = yield userRef.get();\n        yield put(\n                     SignInSuccess({id:userSnapshot.id, ...userSnapshot.data()})\n                 )\n        }\n    catch(error){\n                yield put(\n                             SignInFailure(error)\n                         )\n                }\n    }\n\nexport function* SignInWithGoogle(){\n    try{\n        \n        const {user} = yield signInWithPopup(auth, GoogleProvider);\n             yield getSnapShotForUser(user)\n\n        }\n    catch(error){\n             yield put(\n                        SignInFailure(error)\n                      )\n                }\n    }\n\nexport function* SignInWithEmail({payload: {email , password}}){\n    try{\n        const {user} = yield signInWithEmailAndPassword( auth, email,password)\n            yield getSnapShotForUser(user)\n\n    }\n    catch(error){\n                yield put(SignInFailure(error))\n            }\n    }\n\nexport function* isUserAuthenticated(){\n\n    try{\n        const userAuth = yield getCurrentUser();\n    if(!userAuth) \n    return;\n    yield getSnapShotForUser(userAuth)\n\n    }catch(error){\n\n    }\n\n}\n\nexport function* SignOut(){\n    try{\n        yield signOut(auth)\n        yield put(SignOutSuccess())\n\n    }catch(error){\n        yield put (SignOutFailure(error))\n    }\n}\n\nexport function* SignUp({payload:{email, password, displayName}}){\ntry{\n    const {user} = yield createUserWithEmailAndPassword(auth,\n        \n        email,\n        password\n    );\n\n    yield put(SignUpSuccess({user,additionalData:{displayName}}))\n}\n    catch(error){\n        yield put(SignUpFailure(error))\n\n    }  \n}\n\n\nexport function* SignInAfterSignUp({payload:{user, additionalData}}){\n\n    yield getSnapShotForUser(user, additionalData)\n\n}\n\nexport function* onGoogleSignInStart(){\n\n    yield takeLatest(UserActionTypes.GOOGLE_SIGN_IN_START, SignInWithGoogle)\n\n}\n\nexport function* onEmailSignInstart(){\n    yield takeLatest(UserActionTypes.EMAIL_SIGN_IN_START, SignInWithEmail )\n}\n\nexport function* onCheckUserSession(){\n    yield takeLatest(UserActionTypes.CHECK_USER_SESSION, isUserAuthenticated)\n}\n\n\nexport function* onSignOutStart(){\n    yield takeLatest(UserActionTypes.SIGN_OUT_START, SignOut)\n}\n\n\nexport function* onSignUpStart(){\n    yield takeLatest(UserActionTypes.SIGN_UP_START, SignUp)\n}\nexport function* onSignUpSuccess(){\n\n    yield takeLatest(UserActionTypes.SIGN_OUT_SUCCESS, SignInAfterSignUp)\n}\n\n\nexport function* UserSagas(){\n    yield all([call(onGoogleSignInStart), call(onEmailSignInstart),\n         call(onCheckUserSession), call(onSignOutStart),\n         call(onSignUpStart), call(onSignUpSuccess)\n        ])\n}\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}